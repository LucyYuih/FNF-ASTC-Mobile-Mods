<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mobile ASTC Mods [OPT]</title>
<style>
:root{
  --bg:#0b0f14;
  --muted:#97a0ac;
  --accent:#7c5cf7;
  --glass: rgba(255,255,255,0.03);
  --radius:14px;
  --gap:18px;

  --cols: 3;
  --card-scale: 1;
  --title-size: calc(15px * var(--card-scale));
  --meta-size: calc(12px * var(--card-scale));
  --btn-font: calc(13px * var(--card-scale));
  --btn-padding-vert: calc(8px * var(--card-scale));
  --btn-padding-horiz: calc(10px * var(--card-scale));
  --thumb-aspect: 16 / 9;
}

/* reset / base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:linear-gradient(180deg,#07090c 0%, #0b0f14 100%);color:#e6eef8;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto,Arial;overflow-x:hidden;}
.app{max-width:1200px;margin:28px auto;padding:20px;}
header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:18px;flex-wrap:wrap;}
.brand{display:flex;gap:12px;align-items:center;}
.square{width:56px;height:56px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--accent),#4bb6ff);font-weight:800;color:#06111a;font-size:20px;}
.titleWrap{display:flex;flex-direction:column;}
.titleWrap h1{font-size:18px;margin:0}
.titleWrap .lead{margin:0;color:var(--muted);font-size:13px}
.controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;}
.search{background:var(--glass);padding:10px 12px;border-radius:999px;display:flex;gap:8px;align-items:center;min-width:160px;max-width:420px;}
.search input{background:transparent;border:0;color:inherit;outline:none;font-size:14px;width:100%;min-width:0;}

/* sort selector */
.sort-wrap{display:flex;align-items:center;gap:8px;margin-left:8px}
.sort-select{background:var(--glass);border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:10px;color:inherit;font-weight:600}

/* tabs */
.tabs{display:flex;gap:8px;padding:12px 0;margin-bottom:12px;align-items:center;flex-wrap:wrap;}
.tab-group{display:flex;gap:8px;flex:1;align-items:center;flex-wrap:wrap;}
.tab{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:12px;color:var(--muted);cursor:pointer;font-weight:600;font-size:13px;}
.tab.active{background:linear-gradient(90deg, rgba(124,92,247,0.12), rgba(75,182,255,0.06));border-color:transparent;color:#e9f0ff;box-shadow:0 6px 20px rgba(16,18,22,0.4)}
.tab.requests-tab{margin-left:auto;background:linear-gradient(90deg,#4bb6ff,#7c5cf7);color:#06111a;border:0;box-shadow:0 8px 30px rgba(75,182,255,0.12);}

/* grid: responsive columns via --cols; use minmax(0,1fr) so columns shrink */
.grid{
  display:grid;
  gap:var(--gap);
  grid-template-columns: repeat(var(--cols), minmax(0, 1fr));
  align-items:start;
  overflow:auto;
  padding-bottom:6px;
  transition:all 0.18s ease;
  width:100%;
}

/* CARD */
.card{
  background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
  padding:calc(12px * var(--card-scale));
  border-radius:var(--radius);
  display:flex;
  flex-direction:column;
  gap:calc(10px * var(--card-scale));
  border:1px solid rgba(255,255,255,0.03);
  transition:transform 0.18s ease;
}

/* thumb */
.thumb{
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  background:linear-gradient(135deg,#07101a,#0b1420);
  box-shadow:inset 0 -20px 40px rgba(0,0,0,0.35);
  aspect-ratio: var(--thumb-aspect);
  width:100%;
  min-height:60px;
}
.thumb img{width:100%;height:100%;object-fit:cover;display:block;transition: opacity 0.25s ease;}

/* scaled text & buttons inside cards */
.card .title{font-size:var(--title-size);margin:0;color:#eaf2ff;font-weight:700;line-height:1.15}
.card .meta{font-size:var(--meta-size);color:var(--muted);display:block;margin-top:-2px}

/* global button style */
.btn{
  flex:0 0 auto;
  padding:8px 10px;
  border-radius:10px;
  border:0;
  background:transparent;
  color:#cfe3ff;
  font-weight:700;
  font-size:13px;
  cursor:pointer;
  border:1px solid rgba(255,255,255,0.04);
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height:32px;
}

/* buttons inside cards: equal width */
.card .btn{
  flex:1 1 0;
  padding: var(--btn-padding-vert) var(--btn-padding-horiz);
  font-size: var(--btn-font);
  min-height: calc(32px * var(--card-scale));
  min-width: 0;
}

/* variants */
.btn.primary{background:linear-gradient(90deg,var(--accent),#4bb6ff);color:#06111a;box-shadow:0 8px 30px rgba(124,92,247,0.12);border:0}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.03)}
.btn.small{padding:6px 8px;font-size:12px;border-radius:8px}
.extra-buttons{display:flex;gap:6px;flex-wrap:wrap;flex:1 1 100%}
.card .buttons { display:flex; gap:8px; align-items:center; flex-wrap:wrap; width:100%; }

/* options */
.options-container { position: relative; margin-left: auto; }
.options-menu { display: none; position: absolute; top: 110%; right: 0; background: var(--glass); backdrop-filter: blur(8px); border-radius: 10px; padding: 12px; min-width: 160px; box-shadow: 0 6px 20px rgba(0,0,0,0.3); z-index: 20; }
.options-menu.show { display: flex; align-items: center; gap: 12px; }
.options-menu input[type=range]{ -webkit-appearance: none; appearance: none; width:140px; height:8px; background: linear-gradient(90deg,#2b3340,#111418); border-radius:6px; outline:none; }
.options-menu input[type=range]::-webkit-slider-thumb{ -webkit-appearance:none; width:20px;height:20px;border-radius:50%;background:linear-gradient(90deg,var(--accent),#4bb6ff);box-shadow:0 6px 18px rgba(0,0,0,0.4); }
.options-menu input[type=range]::-moz-range-thumb{ width:20px;height:20px;border-radius:50%;background:linear-gradient(90deg,var(--accent),#4bb6ff);border:0; }
.cols-count{ background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.04); padding:6px 10px; border-radius:8px; font-weight:800; color:#eaf2ff; min-width:38px; text-align:center; font-size:14px; }

/* requests */
.request-form { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03)); border-radius: var(--radius); padding: 20px; border: 1px solid rgba(255,255,255,0.05); margin-bottom: 24px; display: none; }
.form-group { margin-bottom: 16px; }
.form-control { width:100%; padding:10px 12px; background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.05); border-radius:10px; color:#eaf2ff; }
.requests-grid { display: grid; gap: var(--gap); grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); }
.request-card { background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02)); padding: 16px; border-radius: var(--radius); border: 1px solid rgba(255,255,255,0.03); position: relative; box-shadow: 0 4px 18px rgba(0,0,0,0.35); }
.request-title{font-size:16px;margin:8px 0;font-weight:700;color:#eaf2ff}
.request-meta { color: var(--muted); font-size:13px; margin-bottom: 10px; display:flex; gap:12px; align-items:center; }
.request-category { display:inline-block; padding:4px 10px; background: rgba(124,92,247,0.1); border-radius:6px; color:#c6b3ff; font-weight:700; font-size:13px;}
.request-body{font-size:14px;color:#d0d8e3;line-height:1.4;margin-bottom:8px}
.request-status { position:absolute; top:16px; right:16px; font-size:11px; padding:6px 8px; border-radius:6px; font-weight:700; }
.request-tabs { display:flex; gap:8px; margin:12px 0; }
.request-tab { display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:8px 12px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted); font-weight:700; cursor:pointer; font-size:13px; }
.request-tab.active { background: linear-gradient(90deg, rgba(124,92,247,0.14), rgba(75,182,255,0.08)); color:#eaf2ff; border:0; box-shadow:0 8px 20px rgba(0,0,0,0.35); }
.request-view-tab { display:inline-flex; align-items:center; justify-content:center; gap:6px; padding:10px 16px; border-radius:12px; background:transparent; border:1px solid rgba(255,255,255,0.08); color:var(--muted); font-weight:700; cursor:pointer; font-size:14px; transition: all 0.2s ease; }
.request-view-tab.active { background: linear-gradient(90deg, rgba(124,92,247,0.18), rgba(75,182,255,0.12)); color:#eaf2ff; border:0; box-shadow:0 10px 25px rgba(0,0,0,0.4); transform: translateY(-1px); }
.status-open { background: rgba(46, 204, 113, 0.12); color: #2ecc71; border:1px solid rgba(46,204,113,0.08) }
.status-closed { background: rgba(231, 76, 60, 0.12); color: #e74c3c; border:1px solid rgba(231,76,60,0.08) }
.request-link { color: #7c5cf7; text-decoration:none; font-weight:700 }

/* spinner */
.thumb .spinner { width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.footer{color:var(--muted);font-size:12px;margin-top:14px;text-align:center}

/* ------------------------------
   Modal warning styles (ADDED)
   ------------------------------ */
#siteWarningModalOverlay{
  position:fixed;
  inset:0;
  background:rgba(2,6,12,0.7);
  z-index:9999;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}
#siteWarningModal{
  background:linear-gradient(180deg, #0f1720 0%, #07101a 100%);
  border-radius:12px;
  max-width:900px;
  width:100%;
  color:#eaf2ff;
  box-shadow:0 24px 60px rgba(2,6,12,0.8);
  border:1px solid rgba(255,255,255,0.04);
  overflow:hidden;
}
#siteWarningModal header{
  padding:18px 20px;
  border-bottom:1px solid rgba(255,255,255,0.03);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
#siteWarningModal header h3{margin:0;font-size:18px}
#siteWarningModal .modal-body{padding:18px 20px;display:flex;gap:18px;flex-direction:column}
#siteWarningModal .warning-text{font-size:14px;color:#ffd6d6;background:rgba(231,76,60,0.06);padding:10px;border-radius:8px;border:1px solid rgba(231,76,60,0.08)}
#siteWarningModal .hint{font-size:13px;color:var(--muted)}
#siteWarningModal video{max-width:100%;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:#000}
#siteWarningModal .modal-actions{display:flex;gap:10px;justify-content:flex-end;padding:14px 20px;border-top:1px solid rgba(255,255,255,0.02)}
#siteWarningModal .modal-actions .btn{min-width:120px}
#siteWarningModal .learn-more{font-size:13px;color:var(--muted);text-decoration:underline;cursor:pointer}

/* small screens: stack video below text */
@media (min-width:720px){
  #siteWarningModal .modal-body{flex-direction:row;align-items:flex-start}
  #siteWarningModal .modal-col{flex:1}
  #siteWarningModal .modal-video{flex:1;max-width:420px}
}
@media (max-width:719px){
  #siteWarningModal{max-width:480px}
}
</style>
</head>
<body>
  <div class="app">

    <!-- WARNING MODAL (ADDED) -->
    <div id="siteWarningModalOverlay" style="display:none;" aria-hidden="true">
      <div id="siteWarningModal" role="dialog" aria-modal="true" aria-labelledby="siteWarningTitle">
        <header>
          <h3 id="siteWarningTitle">Important Notice!!</h3>
          <button id="siteWarningClose" class="btn ghost" type="button" aria-label="Close notice">Close</button>
        </header>
        <div class="modal-body">
          <div class="modal-col">
            <div class="warning-text">
              Please <strong>do not download anything from outside the website <span style="color:#7c5cf7;">ranoz.gg</span></strong> — files from external sources may contain unwanted or malicious content. Always prefer links hosted on <strong>ranoz.gg</strong> listed on this site.
            </div>
            <p class="hint" style="margin-top:10px;">
              If you're having trouble downloading or installing, watch this tutorial video.
            </p>
          </div>

          <div class="modal-col modal-video" style="display:flex;flex-direction:column;gap:8px;align-items:stretch">
            <!-- Make sure 'tutorial.mp4' is in same folder as index.html -->
            <video id="siteTutorialVideo" controls preload="metadata" poster="" tabindex="0">
              <source src="tutorial.mp4" type="video/mp4">
              Your browser does not support HTML5 video — open the file tutorial.mp4 in the same folder.
            </video>
            <div style="display:flex;justify-content:flex-end;align-items:center;">
              <button id="siteWarningGotIt" class="btn primary" type="button">Got it</button>
              <button id="siteWarningDontShow" class="btn ghost" type="button" style="margin-left:8px;">Don’t show again</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- END WARNING MODAL -->

    <header>
      <div class="brand">
        <div class="square">FNF</div>
        <div class="titleWrap">
          <h1>Mobile ASTC Mods [OPT]</h1>
          <div class="lead">Optimized Mods for Mobile</div>
        </div>
      </div>

      <div class="controls">
        <div style="display:flex;align-items:center">
          <div class="search" title="Search by name">
            🔎 <input id="search" placeholder="Search by name..." />
          </div>
          <div class="sort-wrap">
            <label for="sortSelect" style="font-size:13px;color:var(--muted)">Sort:</label>
            <select id="sortSelect" class="sort-select" title="Sort mods">
              <option value="default">Default</option>
              <option value="alpha">Alphabetical</option>
              <option value="recent">Most Recent Added</option>
            </select>
          </div>
        </div>

        <div class="options-container">
          <button id="optionsBtn" class="btn ghost" type="button">⚙ Options</button>
          <div id="optionsMenu" class="options-menu" aria-hidden="true">
            <input type="range" id="zoomSlider" min="1" max="8" step="1" />
            <div class="cols-count" id="colsCount">3</div>
          </div>
        </div>
      </div>
    </header>

    <nav class="tabs" id="tabs">
      <div class="tab-group" id="tabGroup">
        <button class="tab active" data-cat="all" type="button">All</button>
        <button class="tab" data-cat="Tools" type="button">Tools</button>
        <button class="tab" data-cat="Skins" type="button">Skins</button>
        <button class="tab" data-cat="Mods" type="button">Mods</button>
      </div>
      <button class="tab requests-tab" data-cat="requests" id="requestsTab" type="button">Requests</button>
    </nav>

    <main>
      <section id="grid" class="grid" aria-live="polite"></section>
      
      <!-- Request Section -->
      <section id="requestSection" style="display: none;">
        <form class="request-form" id="requestForm">
          <h2>Request a Mod/Skin/Tool</h2>
          <p style="margin-bottom: 16px; color: var(--muted);">Submit your request for a new mod, skin or tool to be added to the collection (requires GitHub login).</p>
          
          <!-- GitHub Login Section -->
          <div id="githubLoginSection" style="margin-bottom: 20px; padding: 16px; background: rgba(255,255,255,0.02); border-radius: 10px; border: 1px solid rgba(255,255,255,0.05);">
            <div id="loginForm" style="display: block;">
              <h3 style="margin: 0 0 12px 0; color: #eaf2ff; font-size: 16px;">GitHub Authentication</h3>
              <p style="margin: 0 0 16px 0; color: var(--muted); font-size: 14px;">Login with your GitHub Personal Access Token to submit and manage requests</p>
              
              <div class="form-group" style="margin-bottom: 12px;">
                <label for="githubUsername" style="display: block; margin-bottom: 6px; color: #eaf2ff; font-weight: 600; font-size: 13px;">GitHub Username*</label>
                <input type="text" id="githubUsernameInput" class="form-control" placeholder="your-github-username" required>
              </div>
              
              <div class="form-group" style="margin-bottom: 16px;">
                <label for="githubToken" style="display: block; margin-bottom: 6px; color: #eaf2ff; font-weight: 600; font-size: 13px;">Personal Access Token*</label>
                <input type="password" id="githubTokenInput" class="form-control" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" required>
                <small style="display: block; margin-top: 4px; color: var(--muted); font-size: 12px;">
                  <a href="https://github.com/settings/tokens" target="_blank" style="color: var(--accent); text-decoration: none;">Create a token</a> with 'repo' and 'user' scopes
                </small>
              </div>
              
              <div style="display: flex; gap: 10px; align-items: center;">
                <button id="githubLoginBtn" class="btn primary" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 6px;">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                  </svg>
                  Login
                </button>
                <div id="loginSpinner" style="display: none;">
                  <div class="spinner" style="width: 20px; height: 20px; border: 2px solid rgba(255,255,255,0.1); border-top: 2px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                </div>
              </div>
              
              <div id="loginError" style="display: none; margin-top: 12px; padding: 10px; background: rgba(231, 76, 60, 0.1); border: 1px solid rgba(231, 76, 60, 0.2); border-radius: 6px; color: #e74c3c; font-size: 13px;"></div>
            </div>
            
            <div id="loginSuccess" style="display: none;">
              <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 12px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                  <img id="userAvatar" src="" alt="Avatar" style="width: 32px; height: 32px; border-radius: 50%; display: none;">
                  <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center;" id="defaultAvatar">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                  </div>
                  <div>
                    <p style="margin: 0; color: #2ecc71; font-weight: 700; font-size: 14px;">Logged in as <span id="githubUsername"></span></p>
                    <p style="margin: 0; color: var(--muted); font-size: 12px;">You can now submit and manage requests</p>
                  </div>
                </div>
                <button id="githubLogoutBtn" class="btn ghost small" type="button">Logout</button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="requestTitle">Title*</label>
            <input type="text" id="requestTitle" class="form-control" placeholder="Name of the mod, skin, etc." required